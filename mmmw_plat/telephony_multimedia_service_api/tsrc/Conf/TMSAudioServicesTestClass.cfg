//TMSAudioServicesTestClass.cfg

[Define]
KErrNotFound -1
KErrNotSupported -5
KErrAlreadyExists -11
KErrNotReady -18
KErrAccessDenied -21

KErrEventPending -2000
KErrCallbackErrorCode -2001
KErrUnexpectedValue -2002
KErrNotificationPending -2005
KErrUnexpectedNotification -2006
KErrTimeoutController -2007

TMS_RESULT_SUCCESS                      0
TMS_RESULT_ALREADY_EXIST                1
TMS_RESULT_DOES_NOT_EXIST               2
TMS_RESULT_NULL_ARGUMENT                3
TMS_RESULT_INVALID_ARGUMENT             4
TMS_RESULT_INVALID_STATE                5
TMS_RESULT_UNINITIALIZED_OBJECT         6
TMS_RESULT_INSUFFICIENT_MEMORY          7
TMS_RESULT_GENERAL_ERROR                8
TMS_RESULT_FATAL_ERROR                  9
TMS_RESULT_OPERATION_CANCELLED          10
TMS_RESULT_ILLEGAL_OPERATION            11
TMS_RESULT_BUFFER_LATENCY_ERROR         12
TMS_RESULT_CALL_TYPE_NOT_SUPPORTED      13
TMS_RESULT_BUFFER_TYPE_NOT_SUPPORTED    14
TMS_RESULT_SOURCE_TYPE_NOT_SUPPORTED    15
TMS_RESULT_SINK_TYPE_NOT_SUPPORTED      16
TMS_RESULT_STREAM_TYPE_NOT_SUPPORTED    17
TMS_RESULT_FORMAT_TYPE_NOT_SUPPORTED    18
TMS_RESULT_EFFECT_TYPE_NOT_SUPPORTED    19
TMS_RESULT_VERSION_NOT_SUPPORTED        20
TMS_RESULT_FORMAT_TYPE_UNSPECIFIED      21
TMS_RESULT_FEATURE_NOT_SUPPORTED        22

TMS_STREAM_UNINITIALIZED    0
TMS_STREAM_INITIALIZED      1
TMS_STREAM_PAUSED           2
TMS_STREAM_STARTED          3

TMS_STREAM_UPLINK           0
TMS_STREAM_DOWNLINK         1

[Enddefine]

/////////////
//TMSFactory
/////////////

[Test]
title  01. TMSFactory - 01. Create Factory
create TmsAudioServicesTestClass Tms
Tms CreateFactory
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 02. Create Call - CS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 03. Create Call - ECS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
allownextresult TMS_RESULT_CALL_TYPE_NOT_SUPPORTED
Tms CreateCall 1
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 04. Create Call - IP
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 05. Create PCM Format
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateFormat PCM16
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 06. Create AMR Format
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateFormat AMR-NB
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 07. Create G711 Format
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateFormat G711
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 08. Create G729 Format
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateFormat G729
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 09. Create ILBC Format
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateFormat iLBC
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 10. Create Buffer
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateBuffer 2 4096
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 11. Create Source CLIENT
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSource 3
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 12. Create Source MODEM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSource 4
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 13. Create Source MIC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSource 5
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 14. Create Sink CLIENT
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSink 6
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 15. Create Sink MODEM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSink 7
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 16. Create Sink SPEAKER
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSink 8
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 17. GetSupportedFormats Dnlink
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms GetSupportedFormats Dnlink
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 18. GetSupportedFormats Uplink
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms GetSupportedFormats Uplink
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 19. CreateGlobalRouting
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateGlobalRouting
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 20. IsCallTypeSupported CS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms IsCallTypeSupported 0
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 21. IsCallTypeSupported ECS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms IsCallTypeSupported 1
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 22. IsCallTypeSupported IP
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms IsCallTypeSupported 2
delete Tms
[Endtest]

[Test]
title  01. TMSFactory - 23. IsCallTypeSupported RTP
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms IsCallTypeSupported 3
delete Tms
[Endtest]

/////////////
//TMSCall
/////////////

[Test]
title  02. TMSCall - 01. IP Create UPL Stream
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 02. IP Create UPL Stream Elements
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddClientSinkToUplStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 03. IP Create DNL Stream
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 04. IP Create DNL Stream Elements
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 05. CS Create UPL Stream
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0
Tms CreateUplinkStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 06. CS Create UPL Stream Elements
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateUplinkStream
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 7    //MODEM
Tms AddModemSinkToUplStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 07. CS Create DNL Stream
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0
Tms CreateDownlinkStream
delete Tms
[Endtest]

[Test]
title  02. TMSCall - 08. CS Create DNL Stream Elements
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
delete Tms
[Endtest]

/////////////
//TMSEffect
/////////////

[Test]
title  03. TMSEffect - 01. Create Global VolumeEffect
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateEffect 9
Tms Volume 9
delete Tms
[Endtest]

[Test]
title  03. TMSEffect - 02. Create Global GainEffect
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateEffect 10
Tms Gain 10
delete Tms
[Endtest]

[Test]
title  03. TMSEffect - 03. Volume Effect
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateEffect 11
Tms Volume 11
delete Tms
[Endtest]

[Test]
title  03. TMSEffect - 04. Gain Effect
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateEffect 12
Tms Gain 12
delete Tms
[Endtest]

[Test]
title  03. TMSEffect - 05. Get Effect Type
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateUplinkStream
Tms CreateEffect 9
Tms GetEffectType 9
Tms CreateEffect 10
Tms GetEffectType 10
Tms CreateEffect 11
Tms GetEffectType 11
Tms CreateEffect 12
Tms GetEffectType 12
delete Tms
[Endtest]

////////////////////
//TMSStream IP CALL
////////////////////

// Only IP call supports codec format selection.

[Test]
title  04. TMSStream - 01. Set and Reset DNL format - PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms ReSetDownlinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 02. Set and Reset DNL format - AMR
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat AMR-NB Dnlink
Tms SetDownlinkFormat
Tms ReSetDownlinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 03. Set and Reset DNL format - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms ReSetDownlinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 04. Set and Reset DNL format - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G729 Dnlink
Tms SetDownlinkFormat
Tms ReSetDownlinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 05. Set and Reset DNL format - ILBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat iLBC Dnlink
Tms SetDownlinkFormat
Tms ReSetDownlinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 06. Set and Reset UPL format - PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms ReSetUplinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 07. Set and Reset UPL format - AMR
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat AMR-NB Uplink
Tms SetUplinkFormat
Tms ReSetUplinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 08. Set and Reset UPL format - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms ReSetUplinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 09. Set and Reset UPL format - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G729 Uplink
Tms SetUplinkFormat
Tms ReSetUplinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 10. Set and Reset UPL format - ILBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms ReSetUplinkFormat
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 11. Open DNL format - PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms CreateEffect 11
Tms AddVolumeEffectToStream
Tms OpenDownlink
waittestclass Tms
Tms Volume 11
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 12. Open DNL format - AMR
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat AMR-NB Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 13. Open DNL format - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 14. Open DNL format - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G729 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 15. Open DNL format - ILBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat iLBC Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 16. Open UPL format - PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms CreateEffect 12
Tms AddGainEffectToStream
Tms OpenUplink
waittestclass Tms
Tms Gain 12
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 17. Open UPL format - AMR
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat AMR-NB Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 18. Open UPL format - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 19. Open UPL format - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G729 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 20. Open UPL format - ILBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 21. Add and Remove Global VolumeEffect To Stream
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateEffect 9
allownextresult TMS_RESULT_DOES_NOT_EXIST
Tms RemoveGlobalVolumeEffectToStream
Tms AddGlobalVolumeEffectToStream   //should never happen global volume is not used with streams.
allownextresult TMS_RESULT_ALREADY_EXIST
Tms AddGlobalVolumeEffectToStream  //should never happen
Tms RemoveGlobalVolumeEffectToStream
Tms AddGlobalVolumeEffectToStream
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 22. Add and Remove Global Gain Effect To Stream
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateEffect 10
allownextresult TMS_RESULT_DOES_NOT_EXIST
Tms RemoveGlobalGainEffectToStream
Tms AddGlobalGainEffectToStream
allownextresult TMS_RESULT_ALREADY_EXIST
Tms AddGlobalGainEffectToStream
Tms RemoveGlobalGainEffectToStream
Tms AddGlobalGainEffectToStream
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 23. Add and Remove Source
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
allownextresult TMS_RESULT_DOES_NOT_EXIST
Tms RemoveClientSrcFromDnlStream
Tms AddClientSrcToDnlStream
allownextresult TMS_RESULT_ALREADY_EXIST
Tms AddClientSrcToDnlStream
Tms RemoveClientSrcFromDnlStream
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms OpenDownlink
waittestclass Tms
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveClientSrcFromDnlStream
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 24. Add and Remove Sink
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
allownextresult TMS_RESULT_DOES_NOT_EXIST
Tms RemoveClientSinkFromUplStream
Tms AddClientSinkToUplStream
allownextresult TMS_RESULT_ALREADY_EXIST
Tms AddClientSinkToUplStream
Tms RemoveClientSinkFromUplStream
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveClientSinkFromUplStream
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 25. Get Stream State - UPL
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
allownextresult TMS_STREAM_UNINITIALIZED
Tms GetStreamState Uplink
Tms OpenUplink
waittestclass Tms
allownextresult TMS_STREAM_INITIALIZED
Tms GetStreamState Uplink
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 26. Get Stream State - DNL
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
allownextresult TMS_STREAM_UNINITIALIZED
Tms GetStreamState Dnlink
Tms OpenDownlink
waittestclass Tms
allownextresult TMS_STREAM_INITIALIZED
Tms GetStreamState Dnlink
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 27. Get Stream Type
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateDownlinkStream
allownextresult TMS_STREAM_UPLINK
Tms GetStreamType Uplink
allownextresult TMS_STREAM_DOWNLINK
Tms GetStreamType Dnlink
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 28. Record PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Close Uplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 29. Record G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Close Uplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 30. Record G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G729 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Close Uplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 31. Record iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Close Uplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 32. Record AMR-NB
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat AMR-NB Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Close Uplink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 33. Play PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Dnlink
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 34. Play G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Dnlink
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 35. Play G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G729 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Dnlink
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 36. Play iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat iLBC Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Dnlink
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 37. Play AMR-NB
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat AMR-NB Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Dnlink
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 38. Pause UPL
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
allownextresult TMS_STREAM_INITIALIZED
Tms GetStreamState Uplink
Tms Start Uplink
Tms SetTimeout 1000
waittestclass Tms
allownextresult TMS_STREAM_STARTED
Tms GetStreamState Uplink
Tms Pause Uplink
waittestclass Tms
allownextresult TMS_STREAM_PAUSED
Tms GetStreamState Uplink
Tms Start Uplink
Tms SetTimeout 1000
waittestclass Tms
allownextresult TMS_STREAM_STARTED
Tms GetStreamState Uplink
Tms Stop Uplink
delete Tms
[Endtest]

[Test]
title  04. TMSStream - 39. Pause DNL
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
allownextresult TMS_STREAM_INITIALIZED
Tms GetStreamState Dnlink
Tms Start Dnlink
Tms SetTimeout 1000
waittestclass Tms
allownextresult TMS_STREAM_STARTED
Tms GetStreamState Dnlink
Tms Pause Dnlink
waittestclass Tms
allownextresult TMS_STREAM_PAUSED
Tms GetStreamState Dnlink
Tms Start Dnlink
Tms SetTimeout 1000
waittestclass Tms
allownextresult TMS_STREAM_STARTED
Tms GetStreamState Dnlink
Tms Stop Dnlink
delete Tms
[Endtest]

////////////////////
//TMSStream CS CALL
////////////////////

[Test]
title  05. TMSStream - 01. CS - Start and Stop UPL
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateUplinkStream
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 7    //MODEM
Tms AddModemSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms Start Uplink
Tms SetTimeout 1000
waittestclass Tms
Tms Stop Uplink
delete Tms
[Endtest]

[Test]
title  05. TMSStream - 02. CS - Start and Stop DNL
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms Start Dnlink
Tms SetTimeout 1000
waittestclass Tms
Tms Stop Dnlink
delete Tms
[Endtest]

// TODO: Add MORE cases verifying correct error codes are returned
//       when attempting to add format to a CS stream.

/////////////
//TMSSource
/////////////

[Test]
title  06. TMSSource - 01. Get Source Type
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSource 3
Tms GetSourceType 3
Tms DeleteSource
Tms CreateSource 4
Tms GetSourceType 4
Tms DeleteSource
Tms CreateSource 5
Tms GetSourceType 5
Tms DeleteSource
delete Tms
[Endtest]

[Test]
title  06. TMSSource - 02. Add and Remove SourceObserver
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSource 3
Tms AddSourceObserver
Tms RemoveSourceObserver
delete Tms
[Endtest]

/////////////
//TMSSink
/////////////

[Test]
title  07. TMSSink - 01. Get Sink Type
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSink 6
Tms GetSinkType 6
Tms DeleteSink
Tms CreateSink 7
Tms GetSinkType 7
Tms DeleteSink
Tms CreateSink 8
Tms GetSinkType 8
Tms DeleteSink
delete Tms
[Endtest]

[Test]
title  07. TMSSink - 02. Add and Remove SinkObserver
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateSink 6
Tms AddSinkObserver
Tms RemoveSinkObserver
delete Tms
[Endtest]

/////////////
//TMSFormat - Codec Settings
/////////////

// Format APIs can only be set for IP call.

[Test]
title  08. TMSFormat - 01. GetType - PCM16
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16
Tms GetType PCM16
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 02. BitRate - AMR-NB
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat AMR-NB Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms GetBitRateList
Tms SetBitrates MIN
Tms GetBitrates MIN
Tms SetBitrates MAX
Tms GetBitrates MAX
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 03. GetType - AMR-NB
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat AMR-NB
Tms SetUplinkFormat
Tms GetType AMR-NB
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 04. BitRate - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms GetBitRateList
Tms SetBitrates MIN
Tms GetBitrates MIN
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 05. GetType - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711
Tms SetUplinkFormat
Tms GetType G711
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 06. Set and Get Mode - G711 encoder
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms SetMode Uplink aLaw
Tms GetMode Uplink
Tms SetMode Uplink uLaw
Tms GetMode Uplink
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 07. Set and Get Mode - G711 decoder
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms SetMode Dnlink aLaw
Tms GetMode Dnlink
Tms SetMode Dnlink uLaw
Tms GetMode Dnlink
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 08. Set and Get CNG - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms ToggleCNG
Tms GetCNG
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 09. Set and Get PLC - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms TogglePLC
Tms GetPLC
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 10. Set and Get VADMode - G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms ToggleVAD
Tms GetVAD
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 11. BitRate - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G729 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms GetBitRateList
Tms SetBitrates MIN
Tms GetBitrates MIN
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 12. GetType - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G729
Tms SetUplinkFormat
Tms GetType G729
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 13. Set and Get VADMode - G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat G729 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms ToggleVAD
Tms GetVAD
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 14. BitRate - iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms GetBitRateList
Tms SetBitrates MIN
Tms GetBitrates MIN
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 15. GetType - iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC
Tms SetUplinkFormat
Tms GetType iLBC
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 16. Set and Get Mode - iLBC - encoder
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms SetMode Uplink 20ms
Tms GetMode Uplink
Tms SetMode Uplink 30ms
Tms GetMode Uplink
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 17. Set and Get Mode - iLBC - decoder
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat iLBC Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms SetMode Dnlink 20ms
Tms GetMode Dnlink
Tms SetMode Dnlink 30ms
Tms GetMode Dnlink
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 18. Set and Get CNG - iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat iLBC Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms ToggleCNG
Tms GetCNG
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 19. Set and Get VADMode - iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms ToggleVAD
Tms GetVAD
delete Tms
[Endtest]

[Test]
title  08. TMSFormat - 20. BitRate - PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
allownextresult TMS_RESULT_DOES_NOT_EXIST
Tms GetBitRateList
delete Tms
[Endtest]

// TODO: Add more cases verifying correct error codes are returned
//       when attempting to set format on a CS call.

////////////////////
// TMSGlobalRouting
////////////////////

[Test]
title  09. TMSGblRtng IP CALL - 01. Add and Remove Observer
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
allownextresult TMS_RESULT_ALREADY_EXIST
Tms AddGlobalRoutingObserver
Tms DeleteGlobalRoutingObserver
allownextresult TMS_RESULT_DOES_NOT_EXIST
Tms DeleteGlobalRoutingObserver
delete Tms
[Endtest]

[Test]
title  09. TMSGblRtng CS CALL - 02. Set and Get Output - None
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
allownextresult TMS_RESULT_INVALID_ARGUMENT
Tms SetOutput None
delete Tms
[Endtest]

[Test]
title  09. TMSGblRtng IP CALL - 03. Set and Get Output - Private
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2    //IP
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput Private
waittestclass Tms
Tms GetOutput Private
delete Tms
[Endtest]

[Test]
title  09. TMSGblRtng IP CALL - 04. Set and Get Output - Public
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2    //IP
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput Public
waittestclass Tms
Tms GetOutput Public
delete Tms
[Endtest]

[Test]
title  09. TMSGblRtng - 05. Set and Get Output - Handset
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput Handset
waittestclass Tms
Tms GetOutput Handset
delete Tms
[Endtest]

[Test]
title  09. TMSGblRtng - 06. Set and Get Output - Loudspeaker
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput Loudspeaker
waittestclass Tms
Tms GetOutput Loudspeaker
delete Tms
[Endtest]

// NOTE: Specific Accessory needs to be connected

[Test]
title  09. TMSGblRtng - 07. Set and Get Output - WiredAudioAccessory
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput WiredAccessory
waittestclass Tms
Tms GetOutput WiredAccessory
delete Tms
[Endtest]

// NOTE: Specific Accessory needs to be connected

[Test]
title  09. TMSGblRtng - 08. Set and Get Output - Accessory
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput Accessory
waittestclass Tms
delete Tms
[Endtest]

// NOTE: Specific TTY Accessory needs to be connected

[Test]
title  09. TMSGblRtng - 09. Set and Get Output - TTY
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput TTY
waittestclass Tms
delete Tms
[Endtest]

// NOTE: CS call only

[Test]
title  09. TMSGblRtng - 10. GetPreviousOutput
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms SetOutput Handset
waittestclass Tms
Tms SetOutput Loudspeaker
waittestclass Tms
Tms GetOutput Loudspeaker
Tms GetPreviousOutput Handset
delete Tms
[Endtest]

// NOTE: CS call only

[Test]
title  09. TMSGblRtng - 11. GetAvailableOutputs
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms GetAvailableOutputs
delete Tms
[Endtest]

[Test]
title  10. RT - 01. Create Player
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 02. Init Player - Default
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTDefault
waittestclass Tms
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 03. Init Player - File
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTFile
waittestclass Tms
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 04. Play Default
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTDefault
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms StopRingTone
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 05. Play File
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTFile
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms MuteRingTone
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 06. Play BeepOnce
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTBeepOnce
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 07. Play Silent
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTSilent
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms StopRingTone
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 08. Play UnsecureVoIP
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTUnsecureVoIP
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms MuteRingTone
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 09. Play Sequence
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTSequence
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 10. Play TTS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTTts
waittestclass Tms
Tms PlayRingTone
waittestclass Tms
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 11. Play BKP tone
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateRingTonePlayer
Tms InitRingTonePlayer RTSequence
waittestclass Tms
Tms PlayRingToneNoEvent
Tms PauseRingTone   //will cancel sequence RT
Tms PlayRingTone    //will play default RT
waittestclass Tms
Tms CloseRingTonePlayer
delete Tms
[Endtest]

[Test]
title  10. RT - 12. Video RT test
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateVideoRingTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 01. Create Player
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 02. Start UserBusy
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone UserBusy
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 03. Start RadioPathNotFound
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone RadioPathNotFound
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 04. Start Congestion
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone Congestion
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 05. Start SpecialInfo
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone SpecialInfo
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 06. Start Reorder
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone Reorder
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 07. Start Alerting
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone Alerting
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 08. Start Waiting
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone Waiting
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 09. Start DataCall
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone DataCall
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 10. Start NoSequence
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone NoSequence
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  11. Inband - 11. Start BeepSequence
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateInbandTonePlayer
Tms StartInbandTone BeepSequence
waittestclass Tms
Tms StopInbandTone
waittestclass Tms
Tms CloseInbandTonePlayer
delete Tms
[Endtest]

[Test]
title  12. DTMF - 01. Create for Dnlink
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateDTMFTonePlayer Dnlink
Tms CloseDTMFPlayer Dnlink
delete Tms
[Endtest]

[Test]
title  12. DTMF - 02. Create for Uplink
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateDTMFTonePlayer Uplink
Tms CloseDTMFPlayer Uplink
delete Tms
[Endtest]

[Test]
title  12. DTMF - 03. Play Dnlink IP
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateDTMFTonePlayer Dnlink
Tms DTMFTonePlay Dnlink
waittestclass Tms
Tms StopDTMFTonePlayer Dnlink
Tms CloseDTMFPlayer Dnlink
Tms RemoveSourceObserver
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveClientSrcFromDnlStream
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveSpkrSinkFromDnlStream
Tms Close Dnlink
delete Tms
[Endtest]

[Test]
title  12. DTMF - 04. Play Uplink IP
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat AMR-NB Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms CreateUplinkStream
Tms CreateFormat AMR-NB Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms OpenDownlink
waittestclass Tms
Tms CreateDTMFTonePlayer Uplink
//Allow TMS_RESULT_INVALID_STATE - actually not supported in IP call
//allownextresult TMS_RESULT_INVALID_STATE
//Tms ContinueDTMFStringSending Uplink
Tms SetLoopPlay
Tms Start Dnlink
Tms Start Uplink
Tms SetTimeout 1000
waittestclass Tms
Tms DTMFTonePlay Uplink
waittestclass Tms
//Tms StopDTMFTonePlayer Uplink
Tms CloseDTMFPlayer Uplink
Tms Stop Uplink
Tms Stop Dnlink
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveMicSrcFromUplStream
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveClientSinkFromUplStream
Tms Close Uplink
waittestclass Tms
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

[Test]
title  12. DTMF - 05. Play Dnlink CS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateDTMFTonePlayer Dnlink
Tms DTMFTonePlay Dnlink
waittestclass Tms
Tms StopDTMFTonePlayer Dnlink
Tms CloseDTMFPlayer Dnlink
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveModemSrcFromDnlStream
//Client must call DeInit() otherwise return TMS_RESULT_INVALID_STATE
allownextresult TMS_RESULT_INVALID_STATE
Tms RemoveSpkrSinkFromDnlStream
Tms Close Dnlink
delete Tms
[Endtest]

// *** H/W TEST ONLY ***
[Test]
title  13. Looptest - 01. IP PCM
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateUplinkStream
Tms CreateFormat PCM16 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms SetLoopPlay
Tms Start Dnlink
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Stop Dnlink
Tms Close Uplink
waittestclass Tms
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

// *** H/W TEST ONLY ***
[Test]
title  13. Looptest - 02. IP G711
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G711 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms CreateUplinkStream
Tms CreateFormat G711 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms OpenDownlink
waittestclass Tms
Tms SetLoopPlay
Tms Start Uplink
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Stop Dnlink
Tms Close Uplink
waittestclass Tms
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

// *** H/W TEST ONLY ***
[Test]
title  13. Looptest - 03. IP AMR-NB
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat AMR-NB Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateUplinkStream
Tms CreateFormat AMR-NB Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms SetLoopPlay
Tms Start Dnlink
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Stop Dnlink
Tms Close Uplink
waittestclass Tms
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

// *** H/W TEST ONLY ***
[Test]
title  13. Looptest - 04. IP G729
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat G729 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms CreateUplinkStream
Tms CreateFormat G729 Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms OpenDownlink
waittestclass Tms
Tms SetLoopPlay
Tms Start Dnlink
Tms Start Uplink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Stop Dnlink
Tms Close Uplink
waittestclass Tms
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

// *** H/W TEST ONLY ***
[Test]
title  13. Looptest - 05. IP iLBC
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
Tms CreateDownlinkStream
Tms CreateFormat iLBC Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms CreateUplinkStream
Tms CreateFormat iLBC Uplink
Tms SetUplinkFormat
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 6    //CLIENT
Tms AddSinkObserver
Tms AddClientSinkToUplStream
Tms OpenUplink
waittestclass Tms
Tms OpenDownlink
waittestclass Tms
Tms SetLoopPlay
Tms Start Uplink
Tms Start Dnlink
Tms SetTimeout 5000
waittestclass Tms
Tms Stop Uplink
Tms Stop Dnlink
Tms Close Uplink
waittestclass Tms
Tms Close Dnlink
waittestclass Tms
delete Tms
[Endtest]

// *** H/W TEST ONLY ***
[Test]
title  13. Looptest - 06 CS
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0    //CS
Tms CreateUplinkStream
Tms CreateSource 5  //MIC
Tms AddMicSrcToUplStream
Tms CreateSink 7    //MODEM
Tms AddModemSinkToUplStream
Tms CreateDownlinkStream
Tms CreateSource 4  //MODEM
Tms AddModemSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms CreateEffect 9 //Global volume
Tms CreateEffect 10 //Global gain
Tms OpenUplink
waittestclass Tms
Tms OpenDownlink
waittestclass Tms
Tms Volume 9
waittestclass Tms
Tms Gain 10
waittestclass Tms
Tms Start Uplink
Tms Start Dnlink
Tms SetTimeout 2000
waittestclass Tms
Tms Volume 9
Tms Gain 10
Tms Stop Uplink
Tms Stop Dnlink
delete Tms
[Endtest]

// Coverage tests
[Test] 
title 14. RTP - 01 RTPSession Test
create TmsAudioServicesTestClass Tms
Tms CreateFactory
allownextresult TMS_RESULT_FEATURE_NOT_SUPPORTED
Tms TestRTPSession
delete Tms
[Endtest]

[Test]
title  15. TMSFactory -  Create Buffer fail test
create TmsAudioServicesTestClass Tms
Tms CreateFactory
allownextresult TMS_RESULT_BUFFER_TYPE_NOT_SUPPORTED
Tms CreateBuffer 1 4096
delete Tms
[Endtest]

[Test]
title  16. NULL Pointer - Coverage test
create TmsAudioServicesTestClass Tms
Tms CreateStreamTest
Tms CreateCallTest
Tms CreateDTMFTest
Tms CreateInbandToneTest
Tms CreateRingToneTest
Tms CreateClientSinkTest
Tms CreateClientSourceTest
Tms CreateSinksTest
Tms CreateSourcesTest
Tms CreateFormatsTest
Tms CreateGlobalVolEffectTest
Tms CreateGlobalGainEffectTest
Tms CreateVolumeEffectTest
Tms CreateGainEffectTest
Tms CreateGlobalRoutingTest
delete Tms
[Endtest]

[Test]
title  17. CS TMSStream fail test
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 0
allownextresult TMS_RESULT_INVALID_ARGUMENT
Tms CreateStreamFailTest
delete Tms
[Endtest]

[Test]
title  18. IP TMSStream fail test
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2
allownextresult TMS_RESULT_INVALID_ARGUMENT
Tms CreateStreamFailTest
delete Tms
[Endtest]

[Test]
title  19. DTMF - Downlink fail
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateDTMFTonePlayer Dnlink
allownextresult TMS_RESULT_GENERAL_ERROR
Tms ContinueDTMFStringSending Dnlink
Tms CloseDTMFPlayer Dnlink
delete Tms
[Endtest]

[Test]
title  20. DTMF - Uplink fail
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateDTMFTonePlayer Uplink
allownextresult TMS_RESULT_GENERAL_ERROR
Tms ContinueDTMFStringSending Uplink
Tms CloseDTMFPlayer Uplink
delete Tms
[Endtest]

[Test]
title  21. TMSGblRtng IP CALL fail
create TmsAudioServicesTestClass Tms
Tms CreateFactory
Tms CreateCall 2    //IP
Tms CreateDownlinkStream
Tms CreateFormat PCM16 Dnlink
Tms SetDownlinkFormat
Tms CreateSource 3  //CLIENT
Tms AddSourceObserver
Tms AddClientSrcToDnlStream
Tms CreateSink 8    //SPKR
Tms AddSpkrSinkToDnlStream
Tms OpenDownlink
waittestclass Tms
Tms CreateGlobalRouting
Tms AddGlobalRoutingObserver
Tms GetAvailableOutputs
allownextresult TMS_RESULT_FEATURE_NOT_SUPPORTED
Tms GetPreviousOutput Handset
delete Tms
[Endtest]

[Test]
title  22. Terminate server
create TmsAudioServicesTestClass Tms
Tms TerminateServer
Tms SetTimeout 1000
waittestclass Tms
delete Tms
[Endtest]

